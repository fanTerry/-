<template>
  <div class='Page'>
    <header class='mod_header'>
      <div class="user_info">
        <div class="left">
          <img :src="userInfo.icon|getDefaultImg(globalConst.xyxUserDefaultIcon)" alt="">
          <div>
            <p class="name">{{userInfo.nickName|subStr(4)}}</p>
            <div class="asset_num">{{userInfo.ableRecScore}}</div>
          </div>
        </div>
        <div class="right">
          <span class="store"></span>
          <p>敬请期待</p>
        </div>
      </div>
    </header>
    <div class='main'>
      <section>
        <div class="title"><i></i>精彩推荐</div>
        <div class="con">
          <ul>
            <li class="mod_game" v-for="(item,index) in 4" :key="index" @click="goUrlPage('/game/shake')">
              <img src="https://rs.esportzoo.com/upload/admin/cmsContent/2020/6/8/jinlinew_1591611616213.jpg" alt="">
            </li>
          </ul>
        </div>
      </section>
    </div>
    <footer class='mod_footer'>

    </footer>
  </div>
</template>

<script>
import { mapGetters, mapActions } from 'vuex';

export default {
  components: {},
  props: [],
  data() {
    return {};
  },
  computed: {
    ...mapGetters({
      getBetData: 'getBetData',
      getGuessData: 'getGuessData',
      userInfo: 'getUserInfo'
    })
  },
  mounted() {
    this.getUserWallet();
  },
  methods: {
    ...mapActions(['setUserInfo']),
    goUrlPage(url) {
      this.$router.push({
        path: url
      });
    },
    getUserWallet() {
      return this.$post('/agency/api/member/getInfo')
        .then(rsp => {
          const dataResponse = rsp;
          if (dataResponse.code == 200) {
            // console.log(dataResponse.data.ableRecScore, "接口获取用户的星星");
            this.setUserInfo({
              ...this.userInfo,
              ableRecScore: dataResponse.data.balance,
              nickName: dataResponse.data.nickname,
              icon: dataResponse.data.headimg
            });

            // console.log(this.userInfo);
          }
        })
        .catch(error => {
          console.log(error);
        });
    }
  }
};
</script>

<style lang='scss' scoped>
@import '../../assets/common/_base';
@import '../../assets/common/_mixin';

.Page {
  @include getBgImg('../../assets/images/game/index_bg.png');
}

.mod_header {
  background-color: transparent;
}

.main {
  padding-bottom: 5.3333vw;
}

.user_info {
  @extend .flex_v_justify;
  padding: 4vw 5.3333vw;
  .left {
    @extend .flex_hc;
    img {
      width: 12.5333vw;
      height: 12.5333vw;
      margin-right: 4vw;
      border: 0.5333vw solid #fff;
      border-radius: 50%;
    }
  }
  .name {
    font-size: 4vw;
    color: #fff;
  }
  .asset_num {
    position: relative;
    @extend .flex_v_h;
    width: 33.3333vw;
    height: 6.6667vw;
    margin: 1.8667vw 0 0 0.9333vw;
    font-size: 3.7333vw;
    font-weight: bold;
    color: #fff;
    background-color: #0c3263;
    border: 1px solid #0974bc;
    border-radius: 6.6667vw;
    text-align: center;
    &::before {
      content: '';
      @extend .g_v_mid;
      left: -1.3333vw;
      width: 7.7333vw;
      height: 7.7333vw;
      @include getBgImg('../../assets/images/game/gold_icon.png');
    }
    &::after {
      content: '';
      @extend .g_v_mid;
      right: 0;
      width: 6.1333vw;
      height: 6.1333vw;
      @include getBgImg('../../assets/images/game/add_icon.png');
    }
  }
  .right {
    text-align: center;
    .store {
      display: inline-block;
      width: 9.0667vw;
      height: 9.0667vw;
      @include getBgImg('../../assets/images/game/store_icon.png');
    }
    p {
      @include getBtn(13.3333vw, 3.4667vw, 2.4vw, #fff, #5f9de2, 3.4667vw);
      margin-top: 0.5333vw;
    }
  }
}

.title {
  @extend .flex_hc;
  padding: 2.6667vw 4.2667vw;
  font-size: 4vw;
  color: #fff;
  i {
    width: 6.9333vw;
    height: 6.9333vw;
    margin-right: 1.0667vw;
    @include getBgImg('../../assets/images/game/good_icon.png');
  }
}

.con {
  margin: 0 1.3333vw;
  padding: 0.8vw;
  border-radius: 1.8667vw;
  background-color: #2198ff;
  ul {
    padding: 0.1333vw 3.2vw;
    border-radius: 1.8667vw;
    background-color: #fff;
  }
  li {
    margin: 3.2vw 0;
  }
  img {
    width: 100%;
    height: 33.3333vw;
    object-fit: cover;
    border-radius: 1.8667vw;
  }
}
</style>
